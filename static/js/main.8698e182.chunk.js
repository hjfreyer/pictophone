(this["webpackJsonppictophone-fe"]=this["webpackJsonppictophone-fe"]||[]).push([[0],{102:function(e,t,r){"use strict";r.r(t);var i=r(0),n=r.n(i),a=r(40),s=r.n(a),p=(r(50),r(10)),o=r.n(p),d=r(8),u=r(14),c=(r(52),r(1)),y=r.n(c),l=(r(29),r(54),r(15)),m=r(41),g=r.n(m),f=r(9),h=r(17),b=r(23);function w(e){if(0===e.points.length)return"";if(1===e.points.length){var t=e.points[0],r=t.x,i=t.y;return"M ".concat(r," ").concat(i," L ").concat(r+1," ").concat(i)}var n="M ".concat(e.points[0].x," ").concat(e.points[0].y),a=!0,s=!1,p=void 0;try{for(var o,d=e.points.slice(1)[Symbol.iterator]();!(a=(o=d.next()).done);a=!0){var u=o.value,c=u.x,y=u.y;n+="L ".concat(c," ").concat(y)}}catch(l){s=!0,p=l}finally{try{a||null==d.return||d.return()}finally{if(s)throw p}}return n}var P=function(e){var t=e.drawing,r=e.width,a=e.height,s=Object(i.useRef)(null);Object(i.useEffect)((function(){var e=s.current;e.style.width=r+"px",e.style.height=a+"px"}));var p={paths:t.paths.map((function(e){return{points:e.points.map((function(e){return{x:e.x*r,y:e.y*a}}))}}))};return n.a.createElement("svg",{ref:s},p.paths.map((function(e,t){return n.a.createElement("path",{key:t,d:w(e),stroke:"black",strokeWidth:"2",fill:"transparent"})})))},k=function(e){var t=e.draft,r=e.onChange,a=e.width,s=e.height,p=Object(i.useRef)(null);function o(e){r(Object(b.a)(t,(function(t){for(var r in e){t.inProgress[r]=t.drawing.paths.length;var i=p.current.getBoundingClientRect(),n={x:(e[r].x-i.left)/a,y:(e[r].y-i.top)/s};t.drawing.paths.push({points:[n]})}})))}function d(e){r(Object(b.a)(t,(function(t){for(var r in e){var i=p.current.getBoundingClientRect(),n={x:(e[r].x-i.left)/a,y:(e[r].y-i.top)/s};t.drawing.paths[t.inProgress[r]].points.push(n)}})))}function u(e){for(var t={},r=0;r<e.length;r++){var i=e.item(r);t[i.identifier]={x:i.clientX,y:i.clientY}}return t}function c(e){return{mouse:{x:e.clientX,y:e.clientY}}}return n.a.createElement("div",{ref:p,className:"canvas",onTouchStart:function(e){e.preventDefault(),o(u(e.changedTouches))},onTouchMove:function(e){e.preventDefault(),d(u(e.changedTouches))},onMouseDown:function(e){1===e.buttons&&o(c(e))},onMouseMove:function(e){1===e.buttons&&d(c(e))},style:{touchAction:"none"}},n.a.createElement(P,{drawing:t.drawing,width:a,height:s}))},j=r(43),I=new(r.n(j).a)({allErrors:!0,coerceTypes:!1,format:"fast",nullable:!0,unicode:!0,uniqueItems:!0,useDefaults:!0});I.addMetaSchema(r(100));function v(e){var t=I.getSchema("Schema#/definitions/".concat(e));return function(r){if(!t)throw new Error("No validator defined for Schema#/definitions/".concat(e));if(!t(r))throw new Error("Invalid "+e+": "+I.errorsText(t.errors.filter((function(e){return"if"!==e.keyword})),{dataVar:e}));return r}}I.addSchema({$schema:"http://json-schema.org/draft-07/schema#",definitions:{Action:{else:{else:{else:{properties:{kind:{enum:["join_game","start_game","make_move"],type:"string"}},required:["kind"]},if:{properties:{kind:{enum:["make_move"],type:"string"}},required:["kind"]},then:{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["make_move"],type:"string"},playerId:{type:"string"},submission:{anyOf:[{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"},{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}]}},required:["gameId","kind","playerId","submission"],type:"object"}},if:{properties:{kind:{enum:["start_game"],type:"string"}},required:["kind"]},then:{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["start_game"],type:"string"},playerId:{type:"string"}},required:["gameId","kind","playerId"],type:"object"}},if:{properties:{kind:{enum:["join_game"],type:"string"}},required:["kind"]},then:{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["join_game"],type:"string"},playerId:{type:"string"}},required:["gameId","kind","playerId"],type:"object"}},ActionRequest:{defaultProperties:[],properties:{action:{anyOf:[{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["join_game"],type:"string"},playerId:{type:"string"}},required:["gameId","kind","playerId"],type:"object"},{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["start_game"],type:"string"},playerId:{type:"string"}},required:["gameId","kind","playerId"],type:"object"},{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["make_move"],type:"string"},playerId:{type:"string"},submission:{anyOf:[{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"},{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}]}},required:["gameId","kind","playerId","submission"],type:"object"}]},uploads:{additionalProperties:{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{paths:{items:{defaultProperties:[],properties:{points:{items:{defaultProperties:[],properties:{x:{type:"number"},y:{type:"number"}},required:["x","y"],type:"object"},type:"array"}},required:["points"],type:"object"},type:"array"}},required:["paths"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"},defaultProperties:[],type:"object"}},required:["action"],type:"object"},CompressedDrawing:{defaultProperties:[],properties:{paths:{items:{items:{type:"number"},type:"array"},type:"array"}},required:["paths"],type:"object"},Drawing:{defaultProperties:[],properties:{paths:{items:{defaultProperties:[],properties:{points:{items:{defaultProperties:[],properties:{x:{type:"number"},y:{type:"number"}},required:["x","y"],type:"object"},type:"array"}},required:["points"],type:"object"},type:"array"}},required:["paths"],type:"object"},FinishedGame:{defaultProperties:[],properties:{playerIds:{items:{type:"string"},type:"array"},series:{items:{defaultProperties:[],properties:{entries:{items:{defaultProperties:[],properties:{playerId:{type:"string"},submission:{anyOf:[{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"},{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}]}},required:["playerId","submission"],type:"object"},type:"array"}},required:["entries"],type:"object"},type:"array"},state:{enum:["GAME_OVER"],type:"string"}},required:["playerIds","series","state"],type:"object"},FirstPromptGame:{defaultProperties:[],properties:{playerIds:{items:{type:"string"},type:"array"},state:{enum:["FIRST_PROMPT"],type:"string"}},required:["playerIds","state"],type:"object"},GameLog:{defaultProperties:[],properties:{entries:{items:{defaultProperties:[],properties:{action:{anyOf:[{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["join_game"],type:"string"},playerId:{type:"string"}},required:["gameId","kind","playerId"],type:"object"},{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["start_game"],type:"string"},playerId:{type:"string"}},required:["gameId","kind","playerId"],type:"object"},{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["make_move"],type:"string"},playerId:{type:"string"},submission:{anyOf:[{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"},{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}]}},required:["gameId","kind","playerId","submission"],type:"object"}]},timestamp:{}},required:["action","timestamp"],type:"object"},type:"array"},lastTimestamp:{}},required:["entries","lastTimestamp"],type:"object"},GameLogEntry:{defaultProperties:[],properties:{action:{anyOf:[{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["join_game"],type:"string"},playerId:{type:"string"}},required:["gameId","kind","playerId"],type:"object"},{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["start_game"],type:"string"},playerId:{type:"string"}},required:["gameId","kind","playerId"],type:"object"},{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["make_move"],type:"string"},playerId:{type:"string"},submission:{anyOf:[{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"},{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}]}},required:["gameId","kind","playerId","submission"],type:"object"}]},timestamp:{}},required:["action","timestamp"],type:"object"},JoinGame:{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["join_game"],type:"string"},playerId:{type:"string"}},required:["gameId","kind","playerId"],type:"object"},MakeMove:{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["make_move"],type:"string"},playerId:{type:"string"},submission:{anyOf:[{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"},{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}]}},required:["gameId","kind","playerId","submission"],type:"object"},Path:{defaultProperties:[],properties:{points:{items:{defaultProperties:[],properties:{x:{type:"number"},y:{type:"number"}},required:["x","y"],type:"object"},type:"array"}},required:["points"],type:"object"},PlayerGame:{else:{else:{else:{else:{else:{properties:{state:{enum:["UNSTARTED","FIRST_PROMPT","WAITING_FOR_PROMPT","RESPOND_TO_PROMPT","GAME_OVER"],type:"string"}},required:["state"]},if:{properties:{state:{enum:["GAME_OVER"],type:"string"}},required:["state"]},then:{defaultProperties:[],properties:{playerIds:{items:{type:"string"},type:"array"},series:{items:{defaultProperties:[],properties:{entries:{items:{defaultProperties:[],properties:{playerId:{type:"string"},submission:{anyOf:[{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"},{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}]}},required:["playerId","submission"],type:"object"},type:"array"}},required:["entries"],type:"object"},type:"array"},state:{enum:["GAME_OVER"],type:"string"}},required:["playerIds","series","state"],type:"object"}},if:{properties:{state:{enum:["RESPOND_TO_PROMPT"],type:"string"}},required:["state"]},then:{defaultProperties:[],properties:{playerIds:{items:{type:"string"},type:"array"},prompt:{anyOf:[{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"},{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}]},state:{enum:["RESPOND_TO_PROMPT"],type:"string"}},required:["playerIds","prompt","state"],type:"object"}},if:{properties:{state:{enum:["WAITING_FOR_PROMPT"],type:"string"}},required:["state"]},then:{defaultProperties:[],properties:{playerIds:{items:{type:"string"},type:"array"},state:{enum:["WAITING_FOR_PROMPT"],type:"string"}},required:["playerIds","state"],type:"object"}},if:{properties:{state:{enum:["FIRST_PROMPT"],type:"string"}},required:["state"]},then:{defaultProperties:[],properties:{playerIds:{items:{type:"string"},type:"array"},state:{enum:["FIRST_PROMPT"],type:"string"}},required:["playerIds","state"],type:"object"}},if:{properties:{state:{enum:["UNSTARTED"],type:"string"}},required:["state"]},then:{defaultProperties:[],properties:{playerIds:{items:{type:"string"},type:"array"},state:{enum:["UNSTARTED"],type:"string"}},required:["playerIds","state"],type:"object"}},Point:{defaultProperties:[],properties:{x:{type:"number"},y:{type:"number"}},required:["x","y"],type:"object"},Ref:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},RespondToPromptGame:{defaultProperties:[],properties:{playerIds:{items:{type:"string"},type:"array"},prompt:{anyOf:[{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"},{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}]},state:{enum:["RESPOND_TO_PROMPT"],type:"string"}},required:["playerIds","prompt","state"],type:"object"},Series:{defaultProperties:[],properties:{entries:{items:{defaultProperties:[],properties:{playerId:{type:"string"},submission:{anyOf:[{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"},{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}]}},required:["playerId","submission"],type:"object"},type:"array"}},required:["entries"],type:"object"},SeriesEntry:{defaultProperties:[],properties:{playerId:{type:"string"},submission:{anyOf:[{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"},{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}]}},required:["playerId","submission"],type:"object"},StartGame:{defaultProperties:[],properties:{gameId:{type:"string"},kind:{enum:["start_game"],type:"string"},playerId:{type:"string"}},required:["gameId","kind","playerId"],type:"object"},Submission:{else:{else:{properties:{kind:{enum:["word","drawing"],type:"string"}},required:["kind"]},if:{properties:{kind:{enum:["drawing"],type:"string"}},required:["kind"]},then:{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{id:{type:"string"}},required:["id"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"}},if:{properties:{kind:{enum:["word"],type:"string"}},required:["kind"]},then:{defaultProperties:[],properties:{kind:{enum:["word"],type:"string"},word:{type:"string"}},required:["kind","word"],type:"object"}},UnstartedGame:{defaultProperties:[],properties:{playerIds:{items:{type:"string"},type:"array"},state:{enum:["UNSTARTED"],type:"string"}},required:["playerIds","state"],type:"object"},Upload:{defaultProperties:[],properties:{drawing:{defaultProperties:[],properties:{paths:{items:{defaultProperties:[],properties:{points:{items:{defaultProperties:[],properties:{x:{type:"number"},y:{type:"number"}},required:["x","y"],type:"object"},type:"array"}},required:["points"],type:"object"},type:"array"}},required:["paths"],type:"object"},kind:{enum:["drawing"],type:"string"}},required:["drawing","kind"],type:"object"},WaitingForPromptGame:{defaultProperties:[],properties:{playerIds:{items:{type:"string"},type:"array"},state:{enum:["WAITING_FOR_PROMPT"],type:"string"}},required:["playerIds","state"],type:"object"}}},"Schema");var E=function(e){var t=e.playerGame,r=e.submitWord,a=e.submitDrawing,s={drawing:{paths:[]},inProgress:{}},p=Object(i.useState)(""),o=Object(d.a)(p,2),u=o[0],c=o[1],y=Object(i.useState)(s),l=Object(d.a)(y,2),m=l[0],g=l[1],f=Object(i.useState)({width:window.innerWidth,height:window.innerHeight}),h=Object(d.a)(f,2),b=h[0],w=h[1];Object(i.useEffect)((function(){return window.addEventListener("resize",(function(){return w({width:window.innerWidth,height:window.innerHeight})}))}),[]);var P=function(e){e.preventDefault(),r(u),c("")},j=function(){a(m.drawing),g(s)},I=n.a.createElement("main",{id:"game"},n.a.createElement("header",null,"Pictophone!"),n.a.createElement("div",{className:"instructions"},"Come up with a thing!"),n.a.createElement("form",{onSubmit:P},n.a.createElement("input",{value:u,onChange:function(e){return c(e.target.value)}}),n.a.createElement("button",null,"Submit"))),v=n.a.createElement("main",{id:"game"},n.a.createElement("header",null,"Pictophone!"),n.a.createElement("div",{className:"instructions"},"Chill out for a sec while everyone else finishes.")),E=3*(.7*b.height)/4,q=Math.min(E,.95*b.width),O=4*q/3;switch(t.state){case"FIRST_PROMPT":return I;case"WAITING_FOR_PROMPT":return v;case"RESPOND_TO_PROMPT":return function(e){return"word"===e.prompt.kind?n.a.createElement("main",{id:"game"},n.a.createElement("div",{className:"word-prompt"},e.prompt.word),n.a.createElement(k,{draft:m,onChange:g,width:q,height:O}),n.a.createElement("button",{onClick:j},"Submit")):n.a.createElement("main",{id:"game"},n.a.createElement(R,{drawing:e.prompt.drawing,width:q,height:O}),n.a.createElement("form",{onSubmit:P},n.a.createElement("input",{value:u,onChange:function(e){return c(e.target.value)}}),n.a.createElement("button",null,"Submit")))}(t)}},q=function(e){var t=e.serieses;return n.a.createElement("main",{id:"sharing"},n.a.createElement("div",{className:"series"},"Scroll this way ->"),t.map((function(e,t){return n.a.createElement("div",{key:t,className:"series"},e.entries.map((function(e,t){return n.a.createElement(O,{key:t,entry:e})})))})))},O=function(e){var t=e.entry,r=Object(i.useRef)(null),a=Object(i.useState)({width:0,height:0}),s=Object(d.a)(a,2),p=s[0],o=s[1];if(Object(i.useEffect)((function(){o({width:r.current.offsetWidth,height:r.current.offsetHeight})}),[]),"word"===t.submission.kind)return n.a.createElement("div",{ref:r,className:"words"},t.submission.word);var u=function(e,t){var r=.75*t;return Math.min(e,r)}(p.width,p.height);return n.a.createElement("div",{ref:r,className:"drawing"},n.a.createElement(R,{drawing:t.submission.drawing,width:u,height:4*u/3}))};var R=function(e){var t=e.drawing,r=e.width,a=e.height,s=Object(i.useState)(null),p=Object(d.a)(s,2),c=p[0],y=p[1];return Object(i.useEffect)((function(){Object(u.a)(o.a.mark((function e(){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://storage.googleapis.com/pictophone-app-drawings/".concat(t.id),{});case 2:return r=e.sent,e.t0=v("CompressedDrawing"),e.next=6,r.json();case 6:e.t1=e.sent,i=(0,e.t0)(e.t1),y({paths:i.paths.map((function(e){for(var t={points:[]},r=0;r<e.length;r+=2)t.points.push({x:e[r],y:e[r+1]});return t}))});case 9:case"end":return e.stop()}}),e)})))()}),[t]),null===c?n.a.createElement("div",null,"Loading..."):n.a.createElement(P,{drawing:c,width:r,height:a})},_=function(e){var t=e.playerGame,r=e.startGame,i=e.submitWord,a=e.submitDrawing,s=n.a.createElement("div",null,"Players: ",t.playerIds.map((function(e,t){return n.a.createElement("div",{key:t},e)})));switch(t.state){case"UNSTARTED":return n.a.createElement("div",null,s,"Waiting to start game.",n.a.createElement("button",{onClick:r},"Start Game"));case"FIRST_PROMPT":case"WAITING_FOR_PROMPT":case"RESPOND_TO_PROMPT":return n.a.createElement(E,{playerGame:t,submitWord:i,submitDrawing:a});case"GAME_OVER":return n.a.createElement(q,{serieses:t.series})}},T=function(e){var t=e.join,r=Object(i.useState)(""),a=Object(d.a)(r,2),s=a[0],p=a[1];return n.a.createElement("div",null,n.a.createElement("h2",null,"Join A Game"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(s)}},n.a.createElement("input",{type:"text",value:s,onChange:function(e){return p(e.target.value)}}),n.a.createElement("button",null,"Submit")))},S=function(e){var t=e.playerId,r=e.dispatch;return n.a.createElement("div",null,n.a.createElement("h1",null,"User page for ",t),n.a.createElement(T,{join:function(e){return r({action:{kind:"join_game",playerId:t,gameId:e}})}}),n.a.createElement("h2",null,"Existing Games"),n.a.createElement(l.a,{path:"versions/0/players/".concat(t,"/games"),render:function(e){var t=e.isLoading,r=e.data;return n.a.createElement("div",null,t?n.a.createElement("span",null,"Loading..."):n.a.createElement("div",null,r.map((function(e){return n.a.createElement("div",{key:e.id},n.a.createElement(h.b,{to:"/g/".concat(e.id)},e.id))}))))}}))};var x={apiKey:"AIzaSyCzMg7Q2ByK5UxUd_x730LT8TmOmbA61MU",authDomain:"pictophone-app.firebaseapp.com",databaseURL:"https://pictophone-app.firebaseio.com",projectId:"pictophone-app",storageBucket:"pictophone-app-drawings",messagingSenderId:"837882351009",appId:"1:837882351009:web:9056a6b26d58fb373ecfe0"},M=y.a.initializeApp(x).auth(),A={signInFlow:"popup",signInOptions:[y.a.auth.GoogleAuthProvider.PROVIDER_ID,y.a.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},G=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Hey it's Pictophone!"),n.a.createElement("p",null,"Care to sign in?"),n.a.createElement(g.a,{uiConfig:A,firebaseAuth:y.a.auth()}))},D=function(e){var t=e.playerId,r=e.dispatch,i=Object(f.h)().gameId,a=function(){return r({action:{kind:"start_game",playerId:t,gameId:i}})},s=function(e){return r({action:{kind:"make_move",playerId:t,gameId:i,submission:{kind:"word",word:e}}})},p=function(e){return r({action:{kind:"make_move",playerId:t,gameId:i,submission:{kind:"drawing",drawing:{id:"request/0"}}},uploads:{"request/0":{kind:"drawing",drawing:e}}})};return n.a.createElement(l.b,{path:"versions/0/players/".concat(t,"/games/").concat(i),render:function(e){var t=e.isLoading,r=e.data;if(t)return n.a.createElement("span",null,"Loading...");var i=v("PlayerGame")(r);return n.a.createElement(_,{playerGame:i,startGame:a,submitWord:s,submitDrawing:p})}})};function N(e){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.pictophone.app/action",{method:"post",body:JSON.stringify(t),mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(){var e=Object(f.g)(),t=Object(i.useState)({ready:!1}),r=Object(d.a)(t,2),a=r[0],s=r[1];if(Object(i.useEffect)((function(){return M.onAuthStateChanged((function(e){return s({ready:!0,user:e})}))}),[]),!a.ready)return n.a.createElement("div",null,"Loading!");if(window.signout=function(){return M.signOut()},!a.user)return"/"!==e.pathname?n.a.createElement(f.a,{to:"/"}):n.a.createElement(G,null);var p=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(f.d,null,n.a.createElement(f.b,{path:"/",exact:!0},a.user?n.a.createElement(S,{playerId:a.user.uid,dispatch:p}):n.a.createElement(G,null)),n.a.createElement(f.b,{path:"/g/:gameId",exact:!0},n.a.createElement(D,{playerId:a.user.uid,dispatch:p})))},F=function(){return n.a.createElement(l.c,{firebase:y.a},n.a.createElement(h.a,null,n.a.createElement(C,null)))},L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(n.a.createElement(F,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");L?(!function(e,t){fetch(e).then((function(r){var i=r.headers.get("content-type");404===r.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):U(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):U(t,e)}))}}()},45:function(e,t,r){e.exports=r(102)},50:function(e,t,r){},52:function(e,t,r){}},[[45,1,2]]]);
//# sourceMappingURL=main.8698e182.chunk.js.map